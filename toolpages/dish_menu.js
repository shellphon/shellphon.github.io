!function(o){var e={order:{datas:{short_name:"shellphon",thread_key:"dish0214",secret:"980060bdb2bb38f1bdf5d73b37382696",author_name:"dish_menu",message:""},url:"http://api.duoshuo.com/posts/create.json",post:function(o,n){var a=this.datas;a.message=JSON.stringify(o),e.postIframe(this.url,n,a)}},postIframe:function(o,e,n){var a=document.createElement("iframe");document.body.appendChild(a),a.style.display="none";var r="frame_name"+(new Date).getTime();a.contentWindow.name=r;var t=document.createElement("form");t.target=r,t.action=o,t.method=e;for(var l in n)if(n.hasOwnProperty(l)){var d=document.createElement("input");d.type="hidden",d.name=l,d.value=n[l],t.appendChild(d)}document.body.appendChild(t),t.submit()}},n=o("#menu");o("#lucky").click(function(){var o=n.find(".name"),a=n.find("tr"),r=n.find(".price"),t=n.find(".dish-id"),l=Math.floor(Math.random()*o.length),d=o.eq(l).text(),s=r.eq(l).text(),c={};bootbox.confirm("不如试下：【"+t.eq(l).text()+'】<span class="lucky-name">'+d+'</span>? <span class="lucky-price">'+s+"</span>元",function(o){o&&(window.localStorage&&localStorage.whoOrder?(c.who=localStorage.whoOrder+"随机了一下",console&&console.log(localStorage.whoOrder+"点了"+d+" ￥"+s),c.name=d,c.price=s,e.order.post(c,"POST"),a.eq(l).removeClass("info").addClass("danger").unbind()):bootbox.prompt("请输入昵称方便对照：",function(o){o&&(window.localStorage&&localStorage.setItem("whoOrder",o),c.who=o+"随机了一下",console&&console.log(o+"点了"+d+" ￥"+s),c.name=d,c.price=s,e.order.post(c,"POST"),a.eq(l).removeClass("info").addClass("danger").unbind())}))})}),o("#rich").click(function(){var o=n.find(".name"),a=n.find("tr"),r=n.find(".price"),t=n.find(".dish-id"),l=o.length-Math.floor(5*Math.random())-1,d=o.eq(l).text(),s=r.eq(l).text(),c={};bootbox.confirm("本期豪华大礼包：【"+t.eq(l).text()+'】<span class="lucky-name">'+d+'</span>? <span class="lucky-price">'+s+"</span>元<br/>不够？加几个配菜。←",function(o){o&&(window.localStorage&&localStorage.whoOrder?(c.who=localStorage.whoOrder+"任性了一下",console&&console.log(localStorage.whoOrder+"点了"+d+" ￥"+s),c.name=d,c.price=s,e.order.post(c,"POST"),a.eq(l).removeClass("info").addClass("danger").unbind()):bootbox.prompt("请输入昵称方便对照：",function(o){o&&(window.localStorage&&localStorage.setItem("whoOrder",o),c.who=o+"任性了一下",console&&console.log(o+"点了"+d+" ￥"+s),c.name=d,c.price=s,e.order.post(c,"POST"),a.eq(l).removeClass("info").addClass("danger").unbind())}))})}),n.find("tr").each(function(){var n=o(this),a=n.find(".name").eq(0).text(),r=n.find(".price").eq(0).text();n.click(function(){var o=n,t={};bootbox.confirm("确定点这个？--"+a+"(￥"+r+")",function(n){n&&(window.localStorage&&localStorage.whoOrder?(t.who=localStorage.whoOrder,console&&console.log(localStorage.whoOrder+"点了"+a+" ￥"+r),t.name=a,t.price=r,e.order.post(t,"POST"),o.removeClass("info").addClass("danger").unbind()):bootbox.prompt("请输入昵称方便对照：",function(n){n&&(window.localStorage&&localStorage.setItem("whoOrder",n),t.who=n,console&&console.log(n+"点了"+a+" ￥"+r),t.name=a,t.price=r,e.order.post(t,"POST"),o.removeClass("info").addClass("danger").unbind())}))})})})}(jQuery);