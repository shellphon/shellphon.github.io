!function(t){function e(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var a=function(e){var a=[],n=["18px","20px","24px","30px"],o=0,s=(new Date).getTime(),r=t(window).height(),i=t(window).width(),p=t('<div class="danmu" id="danmu'+s+'">'+e+"</div>").appendTo(t("body"));o=Math.ceil(Math.random()*(r-30));for(var u=0;u<3;u++)a.push(Math.ceil(256*Math.random()));p.css({color:"rgb("+a.join(",")+")",top:o+"px","font-size":n[Math.ceil(Math.random()*n.length)]}),setTimeout(function(){p.css({right:i+p.width()+"px"})},200)},n={result:[],danmu:function(){this.result.forEach(function(t,e){e%2?setTimeout(function(){a(t.text)},500):a(t.text)})},pull:function(){function a(r){t.ajax({type:"get",async:!1,cache:!0,url:s.replace(/{page}/,r),dataType:"jsonp",jsonp:"callback",success:function(t){var s,i,p;if(t.parentPosts&&!e(t.parentPosts)&&r*o<=t.cursor.total){r++;for(s in t.parentPosts)i=t.parentPosts[s].message.replace(/\&quot;/g,'"'),p=JSON.parse(i),p.time=t.parentPosts[s].created_at,n.result.push(p);a(r)}else n.danmu()}})}var n=this,o=15,s="http://api.duoshuo.com/threads/listPosts.jsonp?order=asc&thread_key=danmu&short_name=shellphon&page={page}&limit="+o;a(1)}};n.pull()}(jQuery);