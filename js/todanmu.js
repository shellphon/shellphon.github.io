!function(t){var e={datas:{short_name:"shellphon",thread_key:"danmu",secret:"980060bdb2bb38f1bdf5d73b37382696",author_name:"danmu",message:""},url:"http://api.duoshuo.com/posts/create.json",upload:function(t,e){var a=this.datas;a.message=JSON.stringify(t),this.postIframe(this.url,e,a)},postIframe:function(t,e,a){var n=document.createElement("iframe");document.body.appendChild(n),n.style.display="none";var o="frame_name"+(new Date).getTime();n.contentWindow.name=o;var i=document.createElement("form");i.target=o,i.action=t,i.method=e;for(var d in a)if(a.hasOwnProperty(d)){var r=document.createElement("input");r.type="hidden",r.name=d,r.value=a[d],i.appendChild(r)}document.body.appendChild(i),i.submit()}},a=function(e){var a=[],n=["18px","20px","24px","30px"],o=0,i=(new Date).getTime(),d=t(window).height(),r=t(window).width(),m=t('<div class="danmu" id="danmu'+i+'">'+e+"</div>").appendTo(t("body"));o=Math.ceil(Math.random()*d);for(var s=0;s<3;s++)a.push(Math.ceil(256*Math.random()));m.css({color:"rgb("+a.join(",")+")",top:o+"px","font-size":n[Math.ceil(Math.random()*n.length)]}),setTimeout(function(){m.css({right:r+m.width()+"px"})},200)};t(".sub").click(function(){var n=t.trim(t("#text").val());return""===n?void bootbox.alert("请输入内容哦"):n.length>20?void bootbox.alert("字数不要太多，受不了～"):(e.upload({text:n},"POST"),void bootbox.alert("发射成功～",function(){a(n)}))})}(jQuery);